<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>DomePort Remake</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    html, body { height: 100%; margin: 0; background: #111; }
    .ui { position:absolute; z-index:10; top:12px; left:12px; display:flex; gap:8px; font:14px/1.2 system-ui,sans-serif; }
    .ui button { padding:8px 12px; border-radius:8px; border:0; background:#2E7DFF; color:#fff; cursor:pointer; }
    .ui button[disabled]{opacity:.6; cursor:default;}
    #fileInput{ position:fixed; left:-9999px; }
  </style>
</head>
<body>

  <!-- UI 2D simple (backup) -->
  <div class="ui">
    <button id="uploadBtn">Upload video</button>
    <button id="playBtn" style="display:none;">Play</button>
  </div>
  <input id="fileInput" type="file" accept="video/*" />

  <a-scene vr-mode-ui="enabled: true" renderer="antialias: true">
    <!-- Caméra + HUD 3D -->
    <a-entity id="rig">
      <a-entity id="cam" camera look-controls wasd-controls position="0 1.6 3">
        <!-- HUD : 3D devant la caméra -->
        <a-entity id="hud" position="0 -0.25 -1.1">
          <!-- Bouton Play/Pause centré -->
          <a-entity id="btnPlay3D" class="clickable"
                    geometry="primitive: plane; width: 0.36; height: 0.12"
                    material="color: #2E7DFF; transparent: true; opacity: 0.95"
                    position="0 0 0">
            <a-text id="btnPlay3DLabel" value="Play" align="center" width="1.6" position="0 0 0.01"></a-text>
          </a-entity>
        </a-entity>
      </a-entity>
    </a-entity>

    <!-- Curseur souris (rayon) pour cliquer en desktop -->
    <a-entity cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>

    <!-- Contrôleurs VR avec lasers -->
    <a-entity id="leftHand"  laser-controls="hand: left"  raycaster="objects: .clickable" cursor="rayOrigin: entity"></a-entity>
    <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .clickable" cursor="rayOrigin: entity"></a-entity>

    <!-- Ciel -->
    <a-sky color="#222"></a-sky>

    <!-- Assets -->
    <a-assets>
      <img id="ground" src="assets/GridBlack.jpg" crossorigin="anonymous">
      <video id="vid" crossorigin="anonymous" playsinline webkit-playsinline preload="auto"></video>
      <a-asset-item id="sato210" src="assets/sato210.obj"></a-asset-item>
    </a-assets>

    <!-- Dôme (noir par défaut) -->
    <a-entity id="dome"
              obj-model="obj: #sato210"
              material="shader: flat; color: #000; side: double"
              position="0 0 0"
              scale="-1 1 1">
    </a-entity>

    <!-- Sol quadrillé -->
    <a-plane material="src: #ground; repeat: 50 50; side: double"
             width="100" height="100" rotation="-90 0 0"></a-plane>
  </a-scene>

  <script src="main.js"></script>
</body>
</html>